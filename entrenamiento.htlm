<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Entrenamiento ‚Äî Guardi√°n 360</title>
<link rel="icon" href="assets/logo-guardian360.png"/>
<style>
:root{--bg:#0b1220;--panel:#0f172a;--card:#111827;--muted:#1f2937;--text:#f8fafc;--sub:#94a3b8;--blue:#2563eb;--radius:16px;--shadow:0 12px 28px rgba(0,0,0,.35)}
body{margin:0;background:linear-gradient(#0b1220,#0c1426);color:var(--text);font-family:Inter,system-ui,Segoe UI}
.nav{position:sticky;top:0;background:rgba(12,18,32,.85);backdrop-filter:blur(10px);border-bottom:1px solid rgba(255,255,255,.06)}
.nav .inner{max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:12px 16px}
.brand{display:flex;align-items:center;gap:10px;font-weight:800}.brand img{width:28px;height:28px;border-radius:8px}
.container{max-width:1100px;margin:0 auto;padding:16px}
.card{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:var(--radius);padding:16px;box-shadow:var(--shadow)}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:14px}
.row{display:flex;gap:10px;flex-wrap:wrap}
.btn{display:inline-flex;align-items:center;gap:8px;padding:12px 16px;border-radius:12px;border:1px solid rgba(255,255,255,.1);background:var(--muted);cursor:pointer}
.btn.primary{background:var(--blue)}.btn.ghost{background:transparent}
.badge{padding:4px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.08);color:var(--sub);font-size:12px}
</style>
<script>
const MODULOS=[{id:'epp',t:'Uso correcto del EPP',q:'¬øCu√°ndo cambiar una mascarilla N95?',a:'Cuando est√© h√∫meda, da√±ada o sucia; o tras 8h de uso continuo.'},{id:'inc',t:'Prevenci√≥n de incendios',q:'¬øQu√© hacer ante un conato?',a:'Activar alarma, usar extintor adecuado si es seguro y evacuar.'},{id:'quim',t:'Manejo de qu√≠micos',q:'¬øQu√© es la FDS?',a:'Ficha/Hoja de Datos de Seguridad del producto.'}];
const S={caps:JSON.parse(localStorage.getItem('g360_caps')||'[]')};
if(S.caps.length===0) S.caps=MODULOS.map(m=>({id:m.id,title:m.t,done:false}));
function save(){localStorage.setItem('g360_caps',JSON.stringify(S.caps));}
const $=(q,el=document)=>el.querySelector(q);
function render(){
  const list=$("#mods"); list.innerHTML="";
  S.caps.forEach(m=>{
    const d=document.createElement('div');
    d.className="row"; d.style.alignItems="center";
    d.innerHTML=`<div class="badge">üìò</div><div style="flex:1"><div><b>${m.title}</b></div><div class="badge">${m.done?'Completado':'Pendiente'}</div></div><button class="btn primary" onclick="ask('${m.id}')">Practicar</button>`;
    list.appendChild(d);
  });
}
function pushChat(who,text){
  const box=$("#chat"); const div=document.createElement('div');div.style.margin="8px 0";
  div.innerHTML=`<div class="badge">${who==='ai'?'Tutor IA':'T√∫'}</div><div>${text}</div>`;
  box.appendChild(div); box.scrollTop=box.scrollHeight;
  if(who==='ai'){ speechSynthesis.cancel(); const u=new SpeechSynthesisUtterance(text);u.lang='es-ES';speechSynthesis.speak(u); }
}
function ask(id){
  const m=MODULOS.find(x=>x.id===id); pushChat("ai", "Pregunta: "+m.q); setTimeout(()=>{pushChat("ai", m.a); const i=S.caps.findIndex(x=>x.id===id); S.caps[i].done=true; save(); render();},500);
}
function send(){
  const v=$("#txt").value.trim(); if(!v) return; $("#txt").value=""; pushChat("yo", v);
  const m=v.toLowerCase();
  if(m.includes("epp")) pushChat("ai","Verific√° talla y estado antes de cada uso.");
  else if(m.includes("incend")) pushChat("ai","Identific√° el tipo de fuego (A,B,C,D,K) y usa el extintor correcto.");
  else pushChat("ai","Gracias. He registrado tu consulta.");
}
window.addEventListener('DOMContentLoaded',render);
</script>
</head>
<body>
<div class="nav"><div class="inner"><div class="brand"><img src="assets/logo-guardian360.png"><span>Guardi√°n 360</span></div><div class="row"><a class="badge" href="dashboard.html">‚Üê Volver</a></div></div></div>
<main class="container">
  <div class="grid">
    <section class="card">
      <h2>M√≥dulos</h2>
      <div id="mods"></div>
    </section>
    <section class="card">
      <h2>Chat de capacitaci√≥n</h2>
      <div id="chat" style="height:320px;overflow:auto;background:#0d1324;border-radius:12px;padding:10px"></div>
      <div class="row" style="margin-top:8px">
        <input id="txt" placeholder="Pregunta sobre seguridad..." style="flex:1;padding:12px;border-radius:12px;border:1px solid rgba(255,255,255,.1);background:#0d1324;color:#fff" onkeydown="if(event.key==='Enter')send()">
        <button class="btn primary" onclick="send()">Enviar</button>
      </div>
    </section>
  </div>
</main>
</body>
</html>
