<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="x-ua-compatible" content="ie=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>PRISMA — Seguridad Industrial · ISO 45001</title>
  <meta name="description" content="PRISMA: plataforma de seguridad inteligente con checklists, permisos de trabajo, incidentes con foto+GPS, mapa de riesgos, sensores y capacitación con IA."/>
  <meta name="theme-color" content="#0a1e14"/>
  <meta property="og:title" content="PRISMA — Seguridad Industrial · ISO 45001"/>
  <meta property="og:description" content="Seguridad inteligente: checklists, incidentes, mapa de riesgos, sensores e IA en una sola PWA."/>
  <link rel="icon" href="logo-prisma.png"/>
  <link rel="preload" as="image" href="logo-prisma.png"/>
  <link rel="manifest" href="manifest.webmanifest"/>
  <link rel="stylesheet" href="style.css"/>

  <!-- Animación tipo “Netflix” para el splash -->
  <style>
    #splash{position:fixed;inset:0;display:grid;place-items:center;z-index:99;
      background:radial-gradient(1200px 520px at 0% -10%,rgba(34,197,94,.16),transparent 60%),
                 radial-gradient(1000px 520px at 100% 0%,rgba(103,232,249,.14),transparent 60%),
                 linear-gradient(180deg,#07130d,#03120c);
      animation:fadeOut 1.2s ease 1.6s forwards}
    .splash-inner{display:grid;place-items:center;gap:10px;transform:scale(.86);opacity:.6;animation:pop .9s cubic-bezier(.2,.9,.2,1) forwards}
    .splash-logo{width:min(120px,30vw);height:min(120px,30vw);border-radius:22px;box-shadow:0 30px 80px rgba(34,197,94,.35), inset 0 1px 0 rgba(255,255,255,.06)}
    .splash-word{font-weight:800;letter-spacing:.06em;color:#e7f5ee}
    @keyframes pop{to{transform:scale(1);opacity:1}}
    @keyframes fadeOut{to{opacity:0;visibility:hidden}}
    /* Ajustes del hero específicos de portada */
    .hero{position:relative;padding:80px 18px 40px;overflow:hidden;border-radius:20px}
    .hero::before{content:"";position:absolute;inset:-12%;
      background:
        radial-gradient(900px 420px at 10% -10%, rgba(46,230,167,.18), transparent 60%),
        radial-gradient(700px 380px at 110% 0%, rgba(18,199,105,.16), transparent 60%),
        linear-gradient(180deg, rgba(0,0,0,.20), rgba(0,0,0,0))}
    .hero-grid{position:relative;z-index:1;display:grid;gap:18px;grid-template-columns:1.1fr .9fr}
    @media (max-width:980px){ .hero-grid{grid-template-columns:1fr} }
    .logo-xl{width:56px;height:56px;border-radius:14px;box-shadow:var(--shadow)}
    .kpis{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
    @media (max-width:640px){ .kpis{grid-template-columns:1fr 1fr} }
    .modules{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:14px}
    @media (max-width:920px){ .modules{grid-template-columns:1fr 1fr} }
    @media (max-width:560px){ .modules{grid-template-columns:1fr} }
    .module a{display:block;text-decoration:none;color:inherit}
    .module .card:hover{transform:translateY(-2px)}
  </style>
</head>
<body>
  <!-- Splash tipo Netflix -->
  <div id="splash" aria-hidden="true">
    <div class="splash-inner">
      <img src="logo-prisma.png" alt="PRISMA" class="splash-logo"/>
      <div class="splash-word">PRISMA</div>
    </div>
  </div>

  <!-- Topbar accesible -->
  <header class="topbar" role="banner">
    <button id="btnMenu" class="icon-btn" aria-label="Menú">☰</button>
    <a class="brand" href="index.html" aria-label="PRISMA inicio">
      <img src="logo-prisma.png" alt="Logo PRISMA" class="logo"/>
      <div>
        <strong>PRISMA</strong><br/>
        <small class="muted">Seguridad Industrial · ISO 45001</small>
      </div>
    </a>
    <nav class="row" aria-label="Acciones">
      <button id="btnLang" class="chip" title="Idioma">ES</button>
      <button id="btnTheme" class="icon-btn" title="Tema">🌞</button>
      <a class="chip outline" href="auth.html" data-i18n="login">Ingresar</a>
    </nav>
  </header>

  <!-- Drawer móvil -->
  <aside id="drawer" aria-label="Navegación">
    <nav>
      <a href="dashboard.html" data-i18n="nav.dashboard">Dashboard</a>
      <a href="formularios.html" data-i18n="nav.forms">Formularios</a>
      <a href="trabajador.html" data-i18n="nav.worker">Trabajador</a>
      <a href="entrenamiento.html" data-i18n="nav.training">Capacitación</a>
      <a href="sensores.html" data-i18n="nav.sensors">Sensores</a>
      <a href="reportes.html" data-i18n="nav.reports">Reportes</a>
      <a href="mapa.html" data-i18n="nav.map">Mapa</a>
      <a href="gamificacion.html" data-i18n="nav.gamification">Gamificación</a>
      <a href="mensajes.html" data-i18n="nav.messages">Mensajes</a>
      <a href="ajustes.html" data-i18n="nav.settings">Ajustes</a>
      <a href="auth.html" data-i18n="login">Ingresar</a>
    </nav>
  </aside>

  <!-- Contenido principal -->
  <main id="app" class="container" tabindex="-1">
    <!-- HERO -->
    <section class="hero card" aria-label="Presentación">
      <div class="hero-grid">
        <div>
          <div class="row" style="gap:12px">
            <img src="logo-prisma.png" alt="PRISMA" class="logo-xl"/>
            <div>
              <h1 style="margin:0">Seguridad inteligente para <span class="badge">cero incidentes</span></h1>
              <p class="muted" style="margin:.45rem 0 0">
                Checklists, permisos de trabajo, incidentes con foto+GPS, mapa de riesgos, sensores y capacitación con IA — en una sola PWA.
              </p>
            </div>
          </div>
          <div class="row" style="margin-top:16px">
            <a class="btn primary" href="dashboard.html" data-i18n="cta.open">Abrir Dashboard</a>
            <a class="btn outline" href="auth.html" data-i18n="cta.login">Ingresar</a>
          </div>
          <div class="row" style="margin-top:12px;flex-wrap:wrap">
            <span class="chip">ISO 45001</span>
            <span class="chip">Offline-first</span>
            <span class="chip">Export PDF/CSV</span>
          </div>
        </div>
        <div class="card">
          <h3 data-i18n="kpis.title">Indicadores clave (demo)</h3>
          <div class="kpis">
            <div class="card"><b data-i18n="kpis.incidents">Incidentes hoy</b><div class="muted" id="kpiInc">0</div></div>
            <div class="card"><b data-i18n="kpis.compliance">% Cumplimiento</b><div class="muted" id="kpiOk">92%</div></div>
            <div class="card"><b data-i18n="kpis.training">Capacitaciones</b><div class="muted" id="kpiCap">18</div></div>
          </div>
          <canvas id="spark" height="90" style="margin-top:10px;width:100%"></canvas>
        </div>
      </div>
    </section>

    <!-- ACCIONES RÁPIDAS -->
    <section class="grid" style="margin-top:18px">
      <div class="card">
        <h2 data-i18n="quick.title">Funciones rápidas</h2>
        <div class="row" style="flex-wrap:wrap;gap:10px">
          <a class="btn danger" href="dashboard.html#panic" data-i18n="quick.panic">Botón de pánico (GPS)</a>
          <a class="btn" href="entrenamiento.html" data-i18n="quick.training">Microcursos con voz IA</a>
          <a class="btn" href="sensores.html" data-i18n="quick.sensors">Sensores en tiempo real</a>
          <a class="btn" href="reportes.html#auditoria" data-i18n="quick.audit">Auditoría ISO automática</a>
        </div>
      </div>
    </section>

    <!-- MÓDULOS -->
    <section style="margin-top:8px">
      <h2 data-i18n="modules.title">Módulos</h2>
      <div class="modules">
        <div class="module"><a href="dashboard.html"><div class="card"><b data-i18n="nav.dashboard">Dashboard</b><p class="muted" data-i18n="modules.dash">Riesgos, KPI y actividad.</p></div></a></div>
        <div class="module"><a href="formularios.html"><div class="card"><b data-i18n="nav.forms">Formularios</b><p class="muted">Permisos de trabajo, EPP y STOP.</p></div></a></div>
        <div class="module"><a href="trabajador.html"><div class="card"><b data-i18n="nav.worker">Trabajador</b><p class="muted" data-i18n="modules.worker">Check-in, EPP y QR por tarea.</p></div></a></div>
        <div class="module"><a href="entrenamiento.html"><div class="card"><b data-i18n="nav.training">Capacitación</b><p class="muted" data-i18n="modules.training">Microcursos, voz y evaluación.</p></div></a></div>
        <div class="module"><a href="sensores.html"><div class="card"><b data-i18n="nav.sensors">Sensores</b><p class="muted" data-i18n="modules.sensors">Lecturas, umbrales y alertas.</p></div></a></div>
        <div class="module"><a href="reportes.html"><div class="card"><b data-i18n="nav.reports">Reportes</b><p class="muted" data-i18n="modules.reports">Incidentes y auditoría ISO.</p></div></a></div>
      </div>
    </section>

    <!-- CTA FINAL -->
    <section class="card" style="margin-top:14px;display:flex;align-items:center;justify-content:space-between;gap:14px;flex-wrap:wrap">
      <div>
        <h3 data-i18n="cta.title">Listo para empezar</h3>
        <p class="muted" data-i18n="cta.subtitle">Crea tu cuenta o ingresa para gestionar tu operación con PRISMA.</p>
      </div>
      <div class="row">
        <a class="btn primary" href="auth.html" data-i18n="cta.login2">Ingresar</a>
        <a class="btn outline" href="dashboard.html" data-i18n="cta.explore">Explorar dashboard</a>
      </div>
    </section>

    <footer class="footer">
      <small>© 2025 PRISMA — Seguridad e Higiene · ISO 45001</small>
    </footer>
  </main>

  <!-- Botón SOS flotante + toasts -->
  <button id="panic" title="Botón de pánico">SOS</button>
  <div id="toasts" aria-live="polite" aria-atomic="true"></div>

  <!-- App logic + SW -->
  <script type="module" src="app.js"></script>
  <script> if('serviceWorker' in navigator){ navigator.serviceWorker.register('sw.js'); } </script>
</body>
</html>
